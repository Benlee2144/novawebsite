<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hebrew &amp; Greek Pronunciation Guide &mdash; The Unveiled Word</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .word-card {
      background: rgba(197,150,12,0.05);
      border: 1px solid rgba(197,150,12,0.3);
      border-radius: 8px;
      padding: 1.2rem;
      margin: 0.8rem 0;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 1rem;
      align-items: center;
    }
    .word-original {
      font-size: 2rem;
      font-family: serif;
      color: var(--leather-dark);
    }
    .word-info h3 {
      font-family: var(--font-heading);
      color: var(--leather-dark);
      margin: 0 0 0.2rem;
      font-size: 1rem;
    }
    .word-info .ipa {
      font-family: monospace;
      color: var(--ultramarine);
      font-size: 0.95rem;
    }
    .word-info .transliteration {
      color: var(--text-faded);
      font-size: 0.9rem;
      font-style: italic;
    }
    .word-info .meaning {
      font-family: var(--font-reading);
      color: var(--ink);
      font-size: 0.9rem;
      margin-top: 0.3rem;
    }
    .play-btn {
      background: var(--gold);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .play-btn:hover { background: var(--leather-dark); transform: scale(1.1); }
    .lang-section { margin: 2rem 0; }
    .lang-section h2 {
      font-family: var(--font-heading);
      color: var(--leather-dark);
      border-bottom: 2px solid var(--gold);
      padding-bottom: 0.5rem;
    }
    #pron-search {
      width: 100%;
      max-width: 400px;
      padding: 0.6rem 1rem;
      border: 2px solid var(--gold);
      border-radius: 6px;
      font-family: var(--font-reading);
      font-size: 1rem;
      background: var(--parchment);
      color: var(--ink);
      margin-bottom: 1.5rem;
    }
    @media (max-width: 768px) {
      .word-card { grid-template-columns: 1fr; text-align: center; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="nav-container">
      <a href="../" class="site-logo">The Unveiled Word</a>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span><span></span><span></span>
      </button>
      <ul class="nav-links">
        <li><a href="../studies/">Studies</a></li>
        <li><a href="../interlinear/">Interlinear</a></li>
        <li><a href="../lexicon/">Lexicon</a></li>
        <li><a href="../reference/">Reference</a></li>
        <li><a href="../search.html">Search</a></li>
      </ul>
    </div>
  </header>

  <div class="book-page">
    <div class="illuminated-border">
      <div class="border-left"></div><div class="border-right"></div>
      <div class="corner-tl"></div><div class="corner-tr"></div>
      <div class="corner-bl"></div><div class="corner-br"></div>

      <main class="page-container">
        <article class="study-article">
          <header class="study-header">
            <div class="study-category">Tools &bull; Languages &bull; Pronunciation</div>
            <h1 class="study-title">Hebrew &amp; Greek Pronunciation Guide</h1>
            <p class="study-subtitle">All 14,197 Words from the Strong&rsquo;s Lexicon</p>
          </header>
          <hr class="divider">

          <section class="study-body">
            <p class="drop-cap">The words of Scripture were meant to be spoken aloud. Hebrew poetry has rhythm and rhyme that disappears in English translation. Greek verb tenses carry meaning that gets lost in print. This guide helps you hear the words as they were originally pronounced, using academic IPA notation and audio playback.</p>

            <input type="text" id="pron-search" placeholder="Search words..." autocomplete="off">

            <div id="lang-tabs"></div>

            <div id="pronunciation-content">
              <p style="color: var(--text-faded);">Loading 14,197 pronunciation entries...</p>
            </div>
          </section>
        </article>
      </main>
    </div>
  </div>

  <footer class="site-footer">
    <p class="footer-scripture">&ldquo;Your word is a lamp to my feet and a light to my path.&rdquo;</p>
    <p class="footer-ref">PSALM 119:105</p>
    <p class="footer-copy">The Unveiled Word &mdash; Soli Deo Gloria</p>
  </footer>

  <script>
    let allData = null;
    let currentLang = 'hebrew';
    let currentPage = 0;
    const PAGE_SIZE = 50;

    async function init() {
      try {
        const resp = await fetch('../data/biblical_pronunciation.json');
        allData = await resp.json();
        
        const hebrewCount = Object.keys(allData.hebrew || {}).length;
        const greekCount = Object.keys(allData.greek || {}).length;
        document.getElementById('pron-search').placeholder = 
          `Search ${(hebrewCount + greekCount).toLocaleString()} words...`;
        
        renderTabs();
        renderPage();
      } catch(e) {
        document.getElementById('pronunciation-content').innerHTML = 
          '<p style="color:red;">Failed to load pronunciation data: ' + e.message + '</p>';
      }
    }

    function renderTabs() {
      const hebrewCount = Object.keys(allData.hebrew || {}).length;
      const greekCount = Object.keys(allData.greek || {}).length;
      
      const tabsHtml = `
        <div style="display:flex;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap;">
          <button class="lang-tab ${currentLang==='hebrew'?'active':''}" onclick="switchLang('hebrew')" 
            style="padding:0.6rem 1.5rem;border:2px solid var(--gold);border-radius:6px;
            background:${currentLang==='hebrew'?'var(--gold)':'transparent'};
            color:${currentLang==='hebrew'?'white':'var(--leather)'};
            font-family:var(--font-heading);cursor:pointer;font-size:0.9rem;">
            Hebrew (${hebrewCount.toLocaleString()})
          </button>
          <button class="lang-tab ${currentLang==='greek'?'active':''}" onclick="switchLang('greek')"
            style="padding:0.6rem 1.5rem;border:2px solid var(--gold);border-radius:6px;
            background:${currentLang==='greek'?'var(--gold)':'transparent'};
            color:${currentLang==='greek'?'white':'var(--leather)'};
            font-family:var(--font-heading);cursor:pointer;font-size:0.9rem;">
            Greek (${greekCount.toLocaleString()})
          </button>
        </div>`;
      
      document.getElementById('lang-tabs').innerHTML = tabsHtml;
    }

    function switchLang(lang) {
      currentLang = lang;
      currentPage = 0;
      renderTabs();
      renderPage();
    }

    function renderPage() {
      const container = document.getElementById('pronunciation-content');
      const langData = allData[currentLang] || {};
      const entries = Object.entries(langData);
      const totalPages = Math.ceil(entries.length / PAGE_SIZE);
      const start = currentPage * PAGE_SIZE;
      const pageEntries = entries.slice(start, start + PAGE_SIZE);
      
      let html = `<p style="color:var(--text-faded);margin-bottom:1rem;">
        Showing ${start + 1}‚Äì${Math.min(start + PAGE_SIZE, entries.length)} of ${entries.length.toLocaleString()} ${currentLang} words</p>`;
      
      pageEntries.forEach(([word, info]) => {
        html += renderWordCard(word, info, currentLang);
      });
      
      // Pagination
      html += `<div style="display:flex;gap:0.5rem;justify-content:center;margin:2rem 0;flex-wrap:wrap;">`;
      if (currentPage > 0) {
        html += `<button onclick="goPage(${currentPage-1})" style="padding:0.5rem 1rem;border:1px solid var(--gold);border-radius:4px;background:transparent;cursor:pointer;color:var(--leather);">‚Üê Previous</button>`;
      }
      
      // Show page numbers
      const maxButtons = 7;
      let pageStart = Math.max(0, currentPage - 3);
      let pageEnd = Math.min(totalPages, pageStart + maxButtons);
      if (pageEnd - pageStart < maxButtons) pageStart = Math.max(0, pageEnd - maxButtons);
      
      for (let i = pageStart; i < pageEnd; i++) {
        const isActive = i === currentPage;
        html += `<button onclick="goPage(${i})" style="padding:0.5rem 0.8rem;border:1px solid var(--gold);border-radius:4px;
          background:${isActive?'var(--gold)':'transparent'};color:${isActive?'white':'var(--leather)'};
          cursor:pointer;font-weight:${isActive?'bold':'normal'};">${i + 1}</button>`;
      }
      
      if (currentPage < totalPages - 1) {
        html += `<button onclick="goPage(${currentPage+1})" style="padding:0.5rem 1rem;border:1px solid var(--gold);border-radius:4px;background:transparent;cursor:pointer;color:var(--leather);">Next ‚Üí</button>`;
      }
      html += `</div>`;
      
      container.innerHTML = html;
    }

    function goPage(page) {
      currentPage = page;
      renderPage();
      window.scrollTo({ top: document.getElementById('pronunciation-content').offsetTop - 100, behavior: 'smooth' });
    }

    function renderWordCard(word, info, lang) {
      const romanization = info.romanization || info.transliteration || '';
      const ipa = info.ipa || '';
      const meaning = info.meaning || info.definition || '';
      const strongs = info.strongs || '';
      const searchText = (word + ' ' + romanization + ' ' + ipa + ' ' + meaning).toLowerCase();
      
      return `
        <div class="word-card" data-search="${searchText}">
          <div class="word-original">${word}</div>
          <div class="word-info">
            <h3>${romanization}</h3>
            <div class="ipa">/${ipa}/</div>
            ${strongs ? `<div class="transliteration">Strong's: ${strongs}</div>` : ''}
            ${meaning ? `<div class="meaning">${meaning}</div>` : ''}
          </div>
          <button class="play-btn" onclick="speak('${romanization.replace(/'/g, "\\'")}', '${lang}')" title="Hear pronunciation">
            üîä
          </button>
        </div>`;
    }

    function speak(text, lang) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.7;
        utterance.pitch = 1;
        // Try to use appropriate voice
        const voices = speechSynthesis.getVoices();
        const langCode = lang === 'hebrew' ? 'he' : lang === 'greek' ? 'el' : 'ar';
        const voice = voices.find(v => v.lang.startsWith(langCode)) || voices[0];
        if (voice) utterance.voice = voice;
        speechSynthesis.speak(utterance);
      }
    }

    // Search with live filtering
    document.addEventListener('DOMContentLoaded', function() {
      init();
      
      let searchTimeout;
      document.getElementById('pron-search').addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        clearTimeout(searchTimeout);
        
        if (!query || query.length < 2) {
          // Reset to normal pagination view
          renderPage();
          return;
        }
        
        searchTimeout = setTimeout(() => {
          // Search across both languages
          const container = document.getElementById('pronunciation-content');
          let results = [];
          
          for (const lang of ['hebrew', 'greek']) {
            const langData = allData[lang] || {};
            for (const [word, info] of Object.entries(langData)) {
              const searchText = (word + ' ' + (info.transliteration||'') + ' ' + (info.pronunciation||'') + ' ' + (info.definition||'') + ' ' + (info.strongs||'')).toLowerCase();
              if (searchText.includes(query)) {
                results.push({ word, info, lang });
              }
            }
          }
          
          if (results.length === 0) {
            container.innerHTML = `<p>No results for "${query}"</p>`;
            return;
          }
          
          let html = `<p style="color:var(--text-faded);margin-bottom:1rem;">Found ${results.length.toLocaleString()} results for "${query}"</p>`;
          results.slice(0, 100).forEach(r => {
            html += renderWordCard(r.word, r.info, r.lang);
          });
          if (results.length > 100) {
            html += `<p style="color:var(--text-faded);text-align:center;">Showing first 100 of ${results.length} results. Refine your search.</p>`;
          }
          container.innerHTML = html;
        }, 300);
      });
    });
  </script>

  <script src="../js/main.js"></script>
<script src="../js/audio-pronunciation.js"></script>
<script src="../js/bg-music.js"></script>
</body>
</html>