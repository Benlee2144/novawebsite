<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Textual Variants &mdash; 27 Key Manuscript Differences &mdash; The Unveiled Word</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .variants-container { max-width: 900px; margin: 0 auto; padding: 1rem; }
    .variant-card {
      margin-bottom: 1.5rem; padding: 1.5rem; background: rgba(197,150,12,0.03);
      border: 1px solid rgba(197,150,12,0.2); border-radius: 12px; transition: all 0.3s;
    }
    .variant-card:hover { border-color: var(--gold,#c5960c); }
    .variant-header { display: flex; align-items: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
    .variant-ref { font-family: var(--font-heading,'Cinzel',serif); font-size: 1.15rem; color: var(--leather-dark,#2c1810); }
    .variant-ref a { color: inherit; text-decoration: none; border-bottom: 2px solid var(--gold,#c5960c); }
    .confidence-badge {
      display: inline-flex; align-items: center; gap: 4px; padding: 3px 10px; border-radius: 12px;
      font-size: 0.75rem; font-weight: 700; text-transform: uppercase;
    }
    .conf-certain { background: #e8f5e9; color: #2e7d32; }
    .conf-variant { background: #fff3e0; color: #e65100; }
    .conf-uncertain { background: #fff8e1; color: #f57f17; }
    .conf-disputed { background: #fce4ec; color: #c62828; }
    .conf-spurious { background: #ffebee; color: #b71c1c; }
    .variant-title { font-family: var(--font-heading,'Cinzel',serif); font-size: 0.95rem; color: var(--gold,#c5960c); margin-bottom: 0.4rem; }
    .variant-desc { font-family: var(--font-reading,Georgia,serif); font-size: 0.95rem; line-height: 1.6; color: var(--ink,#3c2f2f); margin-bottom: 0.8rem; }
    .ms-section { margin: 0.5rem 0; }
    .ms-label { font-weight: 700; font-size: 0.85rem; color: var(--leather-dark,#2c1810); margin-bottom: 0.2rem; }
    .ms-list { font-size: 0.85rem; color: var(--ink,#3c2f2f); line-height: 1.5; padding-left: 1rem; }
    .ms-for .ms-label { color: #2e7d32; }
    .ms-against .ms-label { color: #c62828; }
    .fathers-note {
      margin-top: 0.5rem; padding: 0.5rem 0.8rem; background: rgba(30,58,110,0.06);
      border-left: 3px solid var(--ultramarine,#1e3a6e); border-radius: 0 6px 6px 0;
      font-size: 0.85rem; color: var(--ultramarine,#1e3a6e);
    }
    .variant-note {
      margin-top: 0.5rem; padding: 0.5rem 0.8rem; background: rgba(197,150,12,0.08);
      border-left: 3px solid var(--gold,#c5960c); border-radius: 0 6px 6px 0;
      font-size: 0.85rem; color: var(--ink,#3c2f2f);
    }
    .confidence-bar { height: 8px; background: #e0e0e0; border-radius: 4px; margin: 0.3rem 0; overflow: hidden; width: 120px; display: inline-block; vertical-align: middle; }
    .confidence-fill { height: 100%; border-radius: 4px; }
    .filters { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1.5rem 0; justify-content: center; }
    .filter-btn {
      padding: 0.4rem 1rem; border: 2px solid var(--gold,#c5960c); border-radius: 20px;
      background: transparent; color: var(--ink,#3c2f2f); font-size: 0.85rem; cursor: pointer; transition: all 0.2s;
    }
    .filter-btn:hover, .filter-btn.active { background: var(--gold,#c5960c); color: #fff; }
    .legend { text-align: center; margin: 1rem 0; font-size: 0.85rem; color: var(--text-faded,#6b5b4a); }
    .ms-details { display: none; }
    .variant-card.expanded .ms-details { display: block; }
    .expand-btn { background: none; border: none; color: var(--gold,#c5960c); cursor: pointer; font-size: 0.85rem; padding: 0; }
  </style>
</head>
<body>
  <main class="variants-container">
    <h1 style="text-align:center;font-family:var(--font-heading,'Cinzel',serif);color:var(--leather-dark,#2c1810);">
      üìú Textual Variants
    </h1>
    <p style="text-align:center;font-family:var(--font-reading,Georgia,serif);color:var(--ink,#3c2f2f);max-width:700px;margin:0 auto 0.5rem;">
      27 significant textual differences in the New Testament manuscripts. Every variant listed with the actual manuscript evidence ‚Äî for and against ‚Äî so you can evaluate for yourself.
    </p>
    <div class="legend">
      <span class="confidence-badge conf-certain">Certain (90%+)</span>
      <span class="confidence-badge conf-variant">Variant (70‚Äì89%)</span>
      <span class="confidence-badge conf-uncertain">Uncertain (50‚Äì69%)</span>
      <span class="confidence-badge conf-disputed">Disputed (15‚Äì49%)</span>
      <span class="confidence-badge conf-spurious">Spurious (&lt;15%)</span>
    </div>
    <div class="filters" id="filters"></div>
    <div id="list"></div>
  </main>

  <script>
  let allVariants = [];
  let activeLevel = 'all';
  const LEVEL_LABELS = {certain:'Certain',variant:'Variant',uncertain:'Uncertain',disputed:'Disputed',spurious:'Spurious'};

  function confColor(c) {
    if (c >= 90) return '#4caf50';
    if (c >= 70) return '#ff9800';
    if (c >= 50) return '#ffc107';
    if (c >= 15) return '#f44336';
    return '#b71c1c';
  }

  async function init() {
    const resp = await fetch('../data/textual_variants.json');
    allVariants = await resp.json();
    allVariants.sort((a,b) => a.confidence - b.confidence);

    const levels = [...new Set(allVariants.map(v => v.level))];
    const filtersEl = document.getElementById('filters');
    const allBtn = document.createElement('button');
    allBtn.className = 'filter-btn active'; allBtn.textContent = `All (${allVariants.length})`;
    allBtn.onclick = () => setFilter('all');
    filtersEl.appendChild(allBtn);
    levels.forEach(l => {
      const count = allVariants.filter(v => v.level === l).length;
      const btn = document.createElement('button');
      btn.className = 'filter-btn'; btn.dataset.level = l;
      btn.textContent = `${LEVEL_LABELS[l]||l} (${count})`;
      btn.onclick = () => setFilter(l);
      filtersEl.appendChild(btn);
    });
    render(allVariants);
  }

  function setFilter(l) {
    activeLevel = l;
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', l==='all' ? !b.dataset.level : b.dataset.level===l));
    render(l === 'all' ? allVariants : allVariants.filter(v => v.level === l));
  }

  function render(items) {
    document.getElementById('list').innerHTML = items.map(v => {
      const confClass = v.confidence >= 90 ? 'conf-certain' : v.confidence >= 70 ? 'conf-variant' : v.confidence >= 50 ? 'conf-uncertain' : v.confidence >= 15 ? 'conf-disputed' : 'conf-spurious';
      return `<div class="variant-card" onclick="this.classList.toggle('expanded')">
        <div class="variant-header">
          <span class="variant-ref"><a href="../interlinear/${v.page}.html">${v.display}</a></span>
          <span class="confidence-badge ${confClass}">${v.level} ${v.confidence}%</span>
          <span class="confidence-bar"><span class="confidence-fill" style="width:${v.confidence}%;background:${confColor(v.confidence)}"></span></span>
          <button class="expand-btn">‚ñº details</button>
        </div>
        <div class="variant-title">${v.title}</div>
        <div class="variant-desc">${v.description}</div>
        <div class="ms-details">
          <div class="ms-section ms-for">
            <div class="ms-label">‚úÖ Manuscripts Supporting:</div>
            <div class="ms-list">${(v.manuscripts_for||[]).join(' ‚Ä¢ ') || 'None listed'}</div>
          </div>
          <div class="ms-section ms-against">
            <div class="ms-label">‚ùå Manuscripts Against:</div>
            <div class="ms-list">${(v.manuscripts_against||[]).join(' ‚Ä¢ ') || 'None listed'}</div>
          </div>
          ${v.fathers ? `<div class="fathers-note">üë§ <strong>Church Fathers:</strong> ${v.fathers}</div>` : ''}
          ${v.note ? `<div class="variant-note">üìù ${v.note}</div>` : ''}
        </div>
      </div>`;
    }).join('');
  }

  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
  else init();
  </script>

  <script src="../js/main.js"></script>
  <script src="../js/audio-pronunciation.js?v2"></script>
  <script src="../js/bg-music.js?v2"></script>
</body>
</html>
