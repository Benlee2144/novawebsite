<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Search &mdash; The Living Word</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    #searchInput {
      width: 100%;
      padding: 12px 16px;
      font-size: 1.1rem;
      border: 2px solid rgba(197,150,12,0.3);
      border-radius: 4px;
      background: var(--vellum-light, #faf5e8);
      color: var(--ink, #3c2f2f);
      font-family: var(--font-body, 'EB Garamond', serif);
      margin-bottom: 20px;
    }
    #searchInput:focus {
      outline: none;
      border-color: var(--gold, #c59612);
    }
    .search-result {
      padding: 12px 0;
      border-bottom: 1px solid rgba(197,150,12,0.1);
    }
    .search-result a {
      color: var(--ultramarine, #1e3a6e);
      text-decoration: none;
      font-size: 1.05rem;
      font-weight: 600;
    }
    .search-result a:hover { text-decoration: underline; }
    .search-result p {
      font-size: 0.85rem;
      color: var(--ink-light, #6b5b4a);
      margin: 4px 0 0;
    }
    #resultCount {
      font-size: 0.85rem;
      color: var(--ink-light, #6b5b4a);
      margin-bottom: 12px;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="nav-container">
      <a href="./" class="site-logo">The Living Word</a>
      <button class="nav-toggle" aria-label="Toggle navigation"><span></span><span></span><span></span></button>
      <ul class="nav-links">
        <li><a href="studies/">Studies</a></li>
        <li><a href="interlinear/">Interlinear</a></li>
        <li><a href="lexicon/">Lexicon</a></li>
        <li><a href="lxx/">LXX</a></li>
      </ul>
    </div>
  </header>
  <div class="book-page"><div class="illuminated-border">
    <div class="border-left"></div><div class="border-right"></div>
    <div class="corner-tl"></div><div class="corner-tr"></div>
    <div class="corner-bl"></div><div class="corner-br"></div>
  <main class="page-container">
    <article class="study-article">
      <header class="study-header">
        <h1 class="study-title">Search</h1>
        <p class="study-subtitle">Search the Lexicon &mdash; 14,197 entries</p>
      </header>
      <hr class="divider">
      <section class="study-body">
        <input type="text" id="searchInput" placeholder="Search by word, Strong&rsquo;s number, or definition..." autofocus>
        <div id="resultCount"></div>
        <div id="results"></div>
      </section>
    </article>
  </main>
  </div></div>
  <div class="book-spine" aria-hidden="true"></div>
  <footer class="site-footer">
    <p class="footer-scripture">&ldquo;Seek, and you shall find.&rdquo;</p>
    <p class="footer-ref">MATTHEW 7:7</p>
    <p class="footer-copy">The Living Word &mdash; Soli Deo Gloria</p>
  </footer>
  <script src="js/main.js"></script>
  <script>
    var IDX=null;
    var inp=document.getElementById('searchInput');
    var res=document.getElementById('results');
    var cnt=document.getElementById('resultCount');
    // Load index on first keystroke
    inp.addEventListener('focus',function load(){
      if(IDX)return;
      cnt.textContent='Loading index...';
      fetch('search-index.json').then(function(r){return r.json();}).then(function(d){
        IDX=d;cnt.textContent='Ready &mdash; '+IDX.length.toLocaleString()+' entries';
      });
      inp.removeEventListener('focus',load);
    });
    inp.addEventListener('input',function(){
      if(!IDX)return;
      var q=this.value.toLowerCase().trim();
      if(q.length<2){res.innerHTML='';cnt.textContent=IDX.length.toLocaleString()+' entries';return;}
      var hits=IDX.filter(function(e){
        return e.i.indexOf(q)>-1||e.t.toLowerCase().indexOf(q)>-1||e.x.toLowerCase().indexOf(q)>-1;
      }).slice(0,50);
      cnt.textContent=hits.length+(hits.length===50?'+':'')+' results';
      res.innerHTML=hits.map(function(e){
        return '<div class="search-result"><a href="'+e.u+'">'+e.t+'</a><p>'+e.x+'</p></div>';
      }).join('');
    });
  </script>
</body></html>